<!DOCTYPE html>
<html lang="ar" dir="rtl" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عربة التسوق</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="ICO.png" type="image/png">
    <script src="function.js"></script>
</head>

<body>
    <a href="home.html">
        <img class="logo" src="logo.png" alt="Logo"> <!-- إضافة الشعار هنا -->
    </a>
    
    <main >
		<section id="cart-container">
		<form class="cart-form">
			
			  <h2>سلة التسوق</h2>
			<div class="empty-cart-message" id="empty-cart-message-cart">
                    <p>السلة لا تحوي منتجات</p>
                </div>
			 <div class="login-alert" id="login-alert" style="display: none;">
            <p>يجب عليك <a href="login.html">تسجيل الدخول</a> أولاً.</p>
        </div>
        <!-- Within each cart item -->
        <div class="cart-item">
            <img src="notepaper.png" alt="Product 1">
            <div class="cart-item-details">
                <h4>أوراق ملاحظات</h4>
                <p class="item-price">السعر: $1.00</p>
                <label for="quantity1" class="quantity-label">الكمية:</label>
                <select id="quantity1" onchange="return updateItemTotal(this);">
                    <option value="1">1</option>
                    <option value="2" selected>2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <span class="separator"></span>
<a href="#" class="save-for-later-link" onclick="saveForLater(this)">حفظ لوقت لاحق</a>
                <span class="separator"></span>
                <a href="#" class="remove-link" onclick="removeFromCart(this)">حذف</a>
                <p class="item-total">المجموع: $2.00</p>
            </div>
        </div>
 <div class="cart-item">
                <img src="colorpen.png" alt="Product 2">
                <div class="cart-item-details">
                    <h4>أقلام تلوين</h4>
                    <p class="item-price">السعر: $2.00</p>
                    <label for="quantity2" class="quantity-label">الكمية:</label>
                    <select id="quantity2" onchange="return updateItemTotal(this);">
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <!-- Add more options as needed up to the max value -->
                    </select>
                    <span class="separator"></span>
                    <a href="#" class="save-for-later-link" onclick="saveForLater(this)">حفظ لوقت لاحق</a>
                    <span class="separator"></span>
                    <a href="#" class="remove-link" onclick="removeFromCart(this)">حذف</a>
                    <p class="item-total">المجموع: $4.00</p> <!-- Add this line -->
                </div>
            </div>
        <div class="cart-total" id="cart-total">
            <p>إجمالي الفاتورة: $0.00</p>
        </div>
        <br>
        <button class="checkout-btn" id="checkout-btn">اتمام الشراء</button>
        <div class="empty-cart-message" id="empty-cart-message" style="display: none;">
            <p>السلة فارغة</p>
        </div>
			</form>
		</section>
		    <section id="saveforlater">
<form class="save-form">
		  
			   <h2>المنتجات المحتفظ بها لوقت لاحق</h2>
			  <div class="saved-item">
    <!-- عرض تفاصيل العنصر المحفوظ -->
    <h4>اسم المنتج</h4>
    <!-- ... أي تفاصيل إضافية ... -->
    <a href="#" class="remove-from-saved" onclick="removeFromSaved(this)">حذف</a>
</div>
		  </form>
		   
		  
		</section>
    </main>

    <footer>
        <p dir="ltr">&copy; 2024 - جميع الحقوق محفوظة</p>
        |
      <a href="privacy.html">سياسة الخصوصية</a> <!-- رابط سياسة الخصوصية -->
        <a href="about.html">من نحن</a> <!-- رابط صفحة "من نحن" -->
    |
    <div class="social-links">
        <strong>تواصل معنا :</strong>
        <a href="mailto:info@example.com">
            <img src="email.png" alt="Email Icon">
        </a>
        <a href="link_to_facebook_page">
            <img src="facebook-icon.png" alt="Facebook Icon">
        </a>
        <a href="tel:+123456789">
            <img src="phone-call.png" alt="Phone Icon">
        </a>
          
    </div>
</footer>

    <script>
     document.addEventListener('DOMContentLoaded', function () {
        checkLoginStatus();
    });

    function checkLoginStatus() {
        var isLoggedIn  ;

        if (!isLoggedIn) {
            // المستخدم غير مسجل الدخول، قم بتفريغ السلة وعرض الرسالة المناسبة
            clearCart();
            displayEmptyCartMessage();
        }
    }

    function clearCart() {
        // قم بتفريغ السلة هنا، يمكنك استخدام الطريقة التي تفضلها
        // على سبيل المثال، يمكنك حذف جميع العناصر في السلة أو حفظها لاستخدامها في وقت لاحق
        var cartItems = document.querySelectorAll('.cart-item');
        cartItems.forEach(function (cartItem) {
            cartItem.remove();
        });
        updateTotal(); // قم بتحديث إجمالي السلة
    }

    function displayEmptyCartMessage() {
        // عرض رسالة السلة فارغة ورابط تسجيل الدخول
        var emptyCartMessage = document.getElementById('empty-cart-message-cart');
        if (emptyCartMessage) {
            emptyCartMessage.style.display = 'block';
        }

        var loginAlert = document.getElementById('login-alert');
        if (loginAlert) {
            loginAlert.style.display = 'block';
        }
    }
    // Function to calculate and return the cart item count
    function getCartItemCount() {
        const cartItems = document.querySelectorAll('.cart-item');
        return cartItems.length;
    }

    // Update the cart item count variable
    let cartItemCount = getCartItemCount();

    // JavaScript section
    document.addEventListener('DOMContentLoaded', function () {
        updateTotal();

        // Display the initial cart item count
        const cartItemCountElement = document.getElementById('cart-item-count');
        if (cartItemCountElement) {
            cartItemCountElement.textContent = cartItemCount;
        }
    });

    function updateItemTotal(select) {
        var cartItem = select.closest('.cart-item');

        if (!cartItem) {
            console.error("Cart item not found.");
            return false;
        }

        var priceElement = cartItem.querySelector('.item-price');

        if (!priceElement) {
            console.error("Price element not found in the current cart item:", cartItem);
            return false;
        }

        var price = parseFloat(priceElement.textContent.replace('السعر: $', ''));
        var quantity = parseInt(select.value);
        var itemTotal = price * quantity;
        cartItem.querySelector('.item-total').textContent = 'المجموع: $' + itemTotal.toFixed(2);
        updateTotal();

        // Return false to prevent form submission
        return false;
    }

    function updateTotal() {
        var cartTotal = 0;
        var cartItems = document.querySelectorAll('.cart-item');

        cartItems.forEach(function (cartItem) {
            var priceElement = cartItem.querySelector('.item-price');
            var quantity = parseInt(cartItem.querySelector('select').value);

            if (priceElement) {
                var price = parseFloat(priceElement.textContent.replace('السعر: $', ''));
                cartTotal += price * quantity;
            }
        });

        var cartTotalElement = document.getElementById('cart-total');
        var checkoutBtn = document.getElementById('checkout-btn');
        var emptyCartMessage = document.getElementById('empty-cart-message');

        if (cartTotal > 0) {
            cartTotalElement.textContent = 'إجمالي الفاتورة: $' + cartTotal.toFixed(2);
            cartTotalElement.style.display = 'block';
            checkoutBtn.style.display = 'block'; // Show the checkout button
            emptyCartMessage.style.display = 'none';
        } else {
            cartTotalElement.style.display = 'none';
            checkoutBtn.style.display = 'none'; // Hide the checkout button
            emptyCartMessage.style.display = 'block';
        }

        // Update the cart item count variable
        cartItemCount = getCartItemCount();

        // Display the updated cart item count
        const cartItemCountElement = document.getElementById('cart-item-count');
        if (cartItemCountElement) {
            cartItemCountElement.textContent = cartItemCount;
        }
    }

    function saveForLater(link) {
        var cartItem = link.closest('.cart-item');

        if (cartItem) {
            // Implement your logic to move the item to the "Save for Later" section or save it in local storage.
            // Example: You can create a "Saved Items" array in local storage and move the item there.
            // localStorage.setItem('savedItems', JSON.stringify(savedItemsArray));
            // Then, remove the item from the current cart.
            cartItem.remove();
            updateTotal(); // Update the total price.
        }
    }

    function removeFromCart(link) {
        var cartItem = link.closest('.cart-item');

        if (cartItem) {
            // Implement your logic to remove the item from the cart.
            cartItem.remove();
            updateTotal(); // Update the total price.
        }
    }
	

</script>

    
</body>

</html>